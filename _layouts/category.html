---
layout: default
---

<article class="post">
  {%- assign display_title = page.title -%}
  {%- assign entry_label = page.title | downcase -%}
  {%- assign entry_label_plural = entry_label | append: "s" -%}
  {%- case page.title -%}
    {%- when "Work" -%}
      {%- assign display_title = "All Works" -%}
    {%- when "Collection" -%}
      {%- assign display_title = "All Collections" -%}
    {%- when "Source" -%}
      {%- assign display_title = "All Sources" -%}
    {%- when "Person" -%}
      {%- assign display_title = "All People" -%}
      {%- assign entry_label = "person" -%}
      {%- assign entry_label_plural = "people" -%}
    {%- when "Organisation" -%}
      {%- assign display_title = "All Organisations" -%}
  {%- endcase -%}

  <header class="post-header">
    <h1 class="post-title">{{ display_title }}</h1>
  </header>

  {%- assign category_entries = site.entries | where_exp: "item", "item.entry.category_of_entry contains page.title" | sort: "title" -%}

  <p class="post-meta">Browse {{ category_entries.size }} {{ entry_label_plural }} in the catalog.</p>

  {%- assign flo_licenses = site.licenses | where_exp: "item", "item.license_certification contains 'Open Definition recommended conformant licence' or item.license_certification contains 'Open Definition other conformant licence' or item.license_certification contains 'Definition of Free Cultural Works conformant licence' or item.license_certification contains 'Open Source Definition compliant licence' or item.license_certification contains 'GPL-compatible free software licence'" -%}
  {%- assign flo_license_titles = flo_licenses | map: "title" -%}

  {%- assign flo_found = false -%}
  {%- assign non_flo_found = false -%}
  {%- assign flo_rows = "" -%}
  {%- assign non_flo_rows = "" -%}
  {%- for entry in category_entries -%}
    {%- assign entry_detail = entry.entry | default: entry -%}
    {%- assign license_items = entry.licensing | default: entry.licenses -%}
    {%- if license_items == nil and entry.license -%}
      {%- assign license_items = "" | split: "" -%}
      {%- assign license_items = license_items | push: entry.license -%}
    {%- endif -%}
    {%- assign is_flo_entry = false -%}
    {%- if entry.licensing and entry.licensing.size > 0 -%}
      {%- for license in entry.licensing -%}
        {%- assign license_title = license.license | default: license.licence -%}
        {%- if license_title == "Public domain" or flo_license_titles contains license_title -%}
          {%- assign is_flo_entry = true -%}
        {%- endif -%}
      {%- endfor -%}
    {%- endif -%}
    {%- capture row -%}
      <article class="featured-card">
        <h3 class="featured-title">
          <a href="{{ entry.url | relative_url }}">{{ entry.title }}</a>
        </h3>
        {%- if entry_detail.thumbnail -%}
          {%- if entry_detail.thumbnail contains "/" -%}
            <img
              class="featured-thumbnail"
              src="{{ entry_detail.thumbnail | relative_url }}"
              alt="{{ entry.title }} thumbnail"
              loading="lazy"
            />
          {%- else -%}
            {{ entry_detail.thumbnail }}
          {%- endif -%}
        {%- endif -%}
        <div class="featured-description">
          <p>{{ entry_detail.short_description | default: "—" }}</p>
          <p>
            <strong>License:</strong>
            {%- if license_items and license_items.size > 0 -%}
              {%- for license_item in license_items -%}
                {%- assign license_title = license_item.license | default: license_item.licence -%}
                {%- assign license_doc = site.licenses | where: "title", license_title | first -%}
                {%- if license_doc -%}
                  {%- if license_doc.small_badge -%}
                    {%- if license_doc.small_badge contains "/" -%}
                      <a href="{{ license_doc.url | relative_url }}">
                        <img
                          src="{{ license_doc.small_badge | relative_url }}"
                          alt="{{ license_title }} badge"
                          loading="lazy"
                          style="width:88px; height:auto;"
                        />
                      </a>
                    {%- else -%}
                      <a href="{{ license_doc.url | relative_url }}">{{ license_doc.small_badge }}</a>
                    {%- endif -%}
                  {%- elsif license_doc.abbreviation -%}
                    <a href="{{ license_doc.url | relative_url }}">{{ license_doc.abbreviation }}</a>
                  {%- else -%}
                    <a href="{{ license_doc.url | relative_url }}">{{ license_title }}</a>
                  {%- endif -%}
                {%- else -%}
                  {{ license_title }}
                {%- endif -%}
                {%- unless forloop.last -%}, {%- endunless -%}
              {%- endfor -%}
            {%- else -%}
              —
            {%- endif -%}
          </p>
          <p>
            <strong>Grouping:</strong>
            {%- if entry.groupings -%}
              {%- for grouping in entry.groupings -%}
                {%- assign grouping_name = grouping.grouping | default: grouping -%}
                {%- assign grouping_doc = site.groupings | where: "title", grouping_name | first -%}
                {%- if grouping_doc -%}
                  <a href="{{ grouping_doc.url | relative_url }}">{{ grouping_name }}</a>
                {%- else -%}
                  {{ grouping_name }}
                {%- endif -%}
                {%- unless forloop.last -%}, {%- endunless -%}
              {%- endfor -%}
            {%- else -%}
              —
            {%- endif -%}
          </p>
        </div>
      </article>
    {%- endcapture -%}
    {%- if is_flo_entry -%}
      {%- assign flo_found = true -%}
      {%- assign flo_rows = flo_rows | append: row -%}
    {%- else -%}
      {%- assign non_flo_found = true -%}
      {%- assign non_flo_rows = non_flo_rows | append: row -%}
    {%- endif -%}
  {%- endfor -%}

  <h2>Free, libre and open licensed or public domain</h2>
  {%- if flo_found -%}
    <div class="featured-grid">
      {{ flo_rows }}
    </div>
  {%- else -%}
    <p><em>No {{ entry_label_plural }} listed.</em></p>
  {%- endif -%}

  <h2>Non-free, libre and open licensed</h2>
  <p>These entries may not be free, libre and open.</p>
  {%- if non_flo_found -%}
    <div class="featured-grid">
      {{ non_flo_rows }}
    </div>
  {%- else -%}
    <p><em>No {{ entry_label_plural }} listed.</em></p>
  {%- endif -%}
</article>
