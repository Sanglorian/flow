---
layout: default
---

<article class="post">
  <header class="post-header">
    <h1 class="post-title">{{ page.title }}</h1>

    {%- if page.short_description -%}
      <p class="post-meta" style="margin-top:.5rem;">
        {{ page.short_description }}
      </p>
    {%- endif -%}
  </header>

  {%- if page.main_description -%}
    <section style="margin-top:1rem;">
      {{ page.main_description | markdownify }}
    </section>
  {%- endif -%}

  {%- assign grouping_pages = site.groupings -%}
  {%- assign subcategories = "" | split: "" -%}
  {%- for candidate in grouping_pages -%}
    {%- if candidate.parent_grouping -%}
      {%- assign parent_groupings = candidate.parent_grouping | split: "," -%}
      {%- for parent_grouping in parent_groupings -%}
        {%- assign parent_grouping_name = parent_grouping | strip -%}
        {%- if parent_grouping_name == page.title -%}
          {%- assign subcategories = subcategories | push: candidate -%}
        {%- endif -%}
      {%- endfor -%}
    {%- endif -%}
  {%- endfor -%}
  {%- assign descendant_titles = "|" -%}
  {%- if subcategories and subcategories.size > 0 -%}
    {%- for sub in subcategories -%}
      {%- assign descendant_titles = descendant_titles | append: sub.title | append: "|" -%}
    {%- endfor -%}
  {%- endif -%}
  {%- for candidate in grouping_pages -%}
    {%- if candidate.parent_grouping -%}
      {%- assign parent_groupings = candidate.parent_grouping | split: "," -%}
      {%- for parent_grouping in parent_groupings -%}
        {%- assign parent_grouping_name = parent_grouping | strip -%}
        {%- if descendant_titles contains parent_grouping_name -%}
          {%- assign descendant_titles = descendant_titles | append: candidate.title | append: "|" -%}
        {%- endif -%}
      {%- endfor -%}
    {%- endif -%}
  {%- endfor -%}


  <section style="margin-top:1.25rem;">
    <h2>Details</h2>
    
        {%- if page.parent_grouping -%}
          <p><strong>Parent Grouping </strong>
                        
              {%- assign parent_groupings = page.parent_grouping | split: "," -%}
              {%- for parent_grouping in parent_groupings -%}
                {%- assign parent_grouping_name = parent_grouping | strip -%}
                {%- assign parent_grouping_doc = grouping_pages | where: "title", parent_grouping_name | first -%}
                {%- if parent_grouping_doc -%}
                  <a href="{{ parent_grouping_doc.url | relative_url }}">{{ parent_grouping_name }}</a>
                {%- else -%}
                  {{ parent_grouping_name }}
                {%- endif -%}
                {%- unless forloop.last -%}, {%- endunless -%}
              {%- endfor -%}
            </p>
        {%- endif -%}

{%- if subcategories and subcategories.size > 0 -%}
          <p>
            <strong>Subcategories </strong>{%- for sub in subcategories -%}
                <a href="{{ sub.url | relative_url }}">{{ sub.title }}</a>{%- unless forloop.last -%}, {% endunless -%}
              {%- endfor -%}
            </p>
        {%- endif -%}

        {%- if page.wikidata -%}
          <p><strong>Wikidata Code </strong>
            
              <a href="https://www.wikidata.org/wiki/{{ page.wikidata }}" rel="nofollow">
                {{ page.wikidata }}
              </a>
            
          </p>
        {%- endif -%}

  </section>


  {%- assign featured_found = false -%}
  {%- assign featured_rows = "" -%}
  {%- assign printed_featured_entries = "" -%}
  {%- for entry in site.entries -%}
    {%- assign e = entry.entry | default: entry -%}
    {%- if e["featured-entry"] and entry.groupings -%}
      {%- for g in entry.groupings -%}
        {%- assign grouping_name = g.grouping | default: g -%}
        {%- assign is_match = false -%}
        {%- if grouping_name == page.title -%}
          {%- assign is_match = true -%}
        {%- elsif descendant_titles contains grouping_name -%}
          {%- assign is_match = true -%}
        {%- endif -%}
        {%- if is_match and printed_featured_entries contains entry.url -%}
          {%- assign is_match = false -%}
        {%- endif -%}
        {%- if is_match -%}
          {%- assign featured_found = true -%}
          {%- assign printed_featured_entries = printed_featured_entries | append: entry.url | append: "|" -%}
                    {%- assign license_markup = "—" -%}
          {%- if entry.licensing and entry.licensing.size > 0 -%}
            {%- assign primary_license = entry.licensing[0] -%}
            {%- assign license_title = primary_license.license | default: primary_license.licence -%}
            {%- assign license_doc = site.licenses | where: "title", license_title | first -%}
            {%- if license_doc -%}
              {%- if license_doc.small_badge -%}
                {%- if license_doc.small_badge contains "/" -%}
                  {%- capture license_markup -%}
                    <a href="{{ license_doc.url | relative_url }}">
                      <img
                        src="{{ license_doc.small_badge | relative_url }}"
                        alt="{{ license_title }} badge"
                        loading="lazy"
                        style="width:88px; height:auto;"
                      />
                    </a>
                  {%- endcapture -%}
                {%- else -%}
                  {%- capture license_markup -%}
                    <a href="{{ license_doc.url | relative_url }}">{{ license_doc.small_badge }}</a>
                  {%- endcapture -%}
                {%- endif -%}
              {%- else -%}
                {%- capture license_markup -%}
                  <a href="{{ license_doc.url | relative_url }}">{{ license_title }}</a>
                {%- endcapture -%}
              {%- endif -%}
            {%- else -%}
              {%- assign license_markup = license_title -%}
            {%- endif -%}
          {%- endif -%}
          {%- capture row -%}
            <article class="featured-card">
              <h3 class="featured-title">
                <a href="{{ entry.url | relative_url }}">{{ entry.title }}</a>
              </h3>
              {%- if e.thumbnail -%}
                {%- if e.thumbnail contains "/" -%}
                  <img
                    class="featured-thumbnail"
                    src="{{ e.thumbnail | relative_url }}"
                    alt="{{ entry.title }} thumbnail"
                    loading="lazy"
                  />
                {%- else -%}
                  {{ e.thumbnail }}
                {%- endif -%}
              {%- endif -%}
              <div class="featured-description">
                {{ e.short_description | default: "—" }} {{ license_markup }}
              </div>
            </article>
          {%- endcapture -%}
          {%- assign featured_rows = featured_rows | append: row -%}
        {%- endif -%}
      {%- endfor -%}
    {%- endif -%}
  {%- endfor -%}

  {%- if featured_found -%}
    <section style="margin-top:1.5rem;">
      <h2>Featured Entries</h2>

      <div class="featured-grid">
        {{ featured_rows }}
      </div>
    </section>
  {%- endif -%}

  {%- assign flo_licenses = site.licenses | where_exp: "item", "item.license_certification contains 'Open Definition recommended conformant licence' or item.license_certification contains 'Open Definition other conformant licence' or item.license_certification contains 'Definition of Free Cultural Works conformant licence' or item.license_certification contains 'FSF free documentation licence' or item.license_certification contains 'Open Source Definition compliant licence' or item.license_certification contains 'GPL-compatible free software licence'" -%}
  {%- assign flo_license_titles = flo_licenses | map: "title" -%}

  <section style="margin-top:1.5rem;">
    <h2>Entries under this grouping</h2>

    {%- assign flo_found = false -%}
    {%- assign non_flo_found = false -%}
    {%- assign flo_rows = "" -%}
    {%- assign non_flo_rows = "" -%}
    {%- assign printed_entries = "" -%}
    {%- for entry in site.entries -%}
      {%- if entry.groupings -%}
        {%- for g in entry.groupings -%}
          {%- assign grouping_name = g.grouping | default: g -%}
          {%- assign is_match = false -%}
          {%- if grouping_name == page.title -%}
            {%- assign is_match = true -%}
          {%- elsif descendant_titles contains grouping_name -%}
            {%- assign is_match = true -%}
          {%- endif -%}
          {%- if is_match and printed_entries contains entry.url -%}
            {%- assign is_match = false -%}
          {%- endif -%}
          {%- if is_match -%}
            {%- assign printed_entries = printed_entries | append: entry.url | append: "|" -%}
            {%- assign is_flo_entry = false -%}
            {%- if entry.licensing and entry.licensing.size > 0 -%}
              {%- for license in entry.licensing -%}
                {%- assign license_title = license.license | default: license.licence -%}
                {%- if license_title == "Public domain" or flo_license_titles contains license_title -%}
                  {%- assign is_flo_entry = true -%}
                {%- endif -%}
              {%- endfor -%}
            {%- endif -%}
            {%- capture row -%}
              <tr>
                <td><a href="{{ entry.url | relative_url }}">{{ entry.title }}</a></td>
                <td>{{ g.is_or_about_grouping | default: "—" }}</td>
                <td><span class="explanation">{{ g.explanation | default: "—" }}</span></td>
              </tr>
            {%- endcapture -%}
            {%- if is_flo_entry -%}
              {%- assign flo_found = true -%}
              {%- assign flo_rows = flo_rows | append: row -%}
            {%- else -%}
              {%- assign non_flo_found = true -%}
              {%- assign non_flo_rows = non_flo_rows | append: row -%}
            {%- endif -%}
          {%- endif -%}
        {%- endfor -%}
      {%- endif -%}
    {%- endfor -%}

    <h3>FLO licensed or public domain</h3>
    <table>
      <thead>
        <tr>
          <th style="text-align:left;">Entry</th>
          <th style="text-align:left;">Relationship</th>
          <th style="text-align:left;">Explanation</th>
        </tr>
      </thead>
      <tbody>
        {%- if flo_found -%}
          {{ flo_rows }}
        {%- else -%}
          <tr>
            <td colspan="3"><em>No entries listed.</em></td>
          </tr>
        {%- endif -%}
      </tbody>
    </table>

    <h3>Non-FLO licensed</h3>
    <table>
      <thead>
        <tr>
          <th style="text-align:left;">Entry</th>
          <th style="text-align:left;">Relationship</th>
          <th style="text-align:left;">Explanation</th>
        </tr>
      </thead>
      <tbody>
        {%- if non_flo_found -%}
          {{ non_flo_rows }}
        {%- else -%}
          <tr>
            <td colspan="3"><em>No entries listed.</em></td>
          </tr>
        {%- endif -%}
      </tbody>
    </table>
  </section>

  {{ content }}
</article>
